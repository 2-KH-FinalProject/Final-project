<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper
	namespace="edu.kh.project.perfmgr.model.mapper.PerfmgrMapper">


	<!-- 로그인 진행 -->
	<select id="login" resultType="PerfMgr">
		SELECT
		CONCERT_MANAGER_NO,
		CONCERT_MANAGER_ID,
		CONCERT_MANAGER_PW,
		CONCERT_MANAGER_NICKNAME,
		CONCERT_MANAGER_TEL,
		CONCERT_MANAGER_ENROLL_DATE,
		CONCERT_MANAGER_DEL_FL,
		CONCERT_MANAGER_COMPANY,
		CONCERT_MANAGER_COMPANY_COMMENT,
		CONCERT_MANAGER_EMAIL,
		MEMBER_AUTH
		FROM
		"TB_CONCERT_MANAGER"
		WHERE CONCERT_MANAGER_ID = #{concertManageId}
		AND
		CONCERT_MANAGER_DEL_FL = 'N'
	</select>


	<!-- 이메일 중복 검사 -->
	<select id="checkEmail" resultType="_int">
		SELECT COUNT(*)
		FROM
		"TB_CONCERT_MANAGER"
		WHERE CONCERT_MANAGER_DEL_FL = 'N'
		AND
		CONCERT_MANAGER_EMAIL = #{concertManagerEmail}
	</select>


	<!-- 아이디 중복 검사 -->
	<select id="checkId" resultType="_int">
		SELECT COUNT(*)
		FROM
		"TB_CONCERT_MANAGER"
		WHERE CONCERT_MANAGER_DEL_FL = 'N'
		AND
		CONCERT_MANAGER_ID = #{concertManagerId}
	</select>


	<!-- 닉네임 중복검사 -->
	<select id="checkNickname" resultType="_int">
		SELECT COUNT(*)
		FROM
		"TB_CONCERT_MANAGER"
		WHERE CONCERT_MANAGER_DEL_FL = 'N'
		AND
		CONCERT_MANAGER_NICKNAME = #{concertManagerNickname}
	</select>


	<!-- 회원가입 서비스 -->
	<insert id="signup">
		INSERT INTO TB_CONCERT_MANAGER
		VALUES(
			SEQ_CONCERT_MANAGER_NO.NEXTVAL, 
			#{concertManagerId}, 
			#{concertManagerPw}, 
			#{concertManagerNickname}, 
			#{concertManagerTel}, 
			DEFAULT, 
			DEFAULT,
			#{concertManagerCompany}, 
			#{concertManagerCompanyComment}, 
			#{concertManagerEmail}, 
			DEFAULT 
		)
	</insert>


</mapper>